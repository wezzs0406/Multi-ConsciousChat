# MMC2 - 多意识体聊天应用

> 一个专为多意识体系统设计的聊天应用，尊重每个意识体的独立性，提供安全、私密的交流环境。

## 📋 项目概述

MMC2 是一个基于 Compose for Desktop 的多意识体聊天应用，使用 Kotlin 和 Jetpack Compose 构建。该应用旨在为多意识体系统提供一个安全、私密的内部交流平台，充分尊重每个意识体的独立性和自主权。

## ✨ 核心特性

### 🎯 多意识体支持
- **系统管理**：支持多个独立意识体共存于同一系统
- **前台切换**：直观的界面显示当前控制身体的意识体
- **成员创建**：谨慎的成员创建流程，包含伦理提醒
- **身份尊重**：每个意识体都被视为独立个体，而非角色或程序

### 💬 对话功能
- **多对话管理**：支持创建和管理多个独立对话
- **实时消息**：流畅的消息发送和接收体验
- **消息历史**：完整的对话记录保存和检索
- **时间戳**：精确的消息时间记录

### 🎨 个性化体验
- **主题系统**：多种预设主题（默认蓝、温柔紫、自然绿、温暖橙、深邃夜）
- **颜色定制**：支持自定义界面配色
- **字体调节**：可调整界面文字大小
- **布局优化**：响应式设计适配不同屏幕尺寸

### 📊 数据管理
- **本地存储**：所有数据默认本地存储，保护隐私
- **数据备份**：支持数据导出和导入
- **缓存管理**：智能缓存清理机制
- **配置持久化**：应用设置自动保存

## 🏗️ 技术架构

### 技术栈
- **语言**: Kotlin
- **UI框架**: Jetpack Compose for Desktop
- **构建工具**: Gradle (Kotlin DSL)
- **日志系统**: SLF4J + Logback
- **数据序列化**: Jackson

### 项目结构
```
src/main/java/dev/mmc/xingtuan/core/
├── core/                           # 核心业务逻辑
│   ├── member/                    # 意识体管理
│   │   ├── Consciousness.kt     # 意识体数据模型
│   │   └── MemberManager.kt     # 意识体管理器
│   └── conversations/              # 对话管理
│       ├── Conversation.kt      # 对话数据模型
│       ├── Message.kt          # 消息数据模型
│       └── ConversationManager.kt # 对话管理器
├── repository/                    # 数据存储层
│   └── DataRepository.kt        # 数据仓库接口
├── ui/                          # 用户界面层
│   ├── components/               # UI组件
│   │   ├── TopAppBar.kt        # 顶部应用栏
│   │   ├── ConversationPanel.kt # 对话面板
│   │   ├── SettingsDialog.kt     # 设置对话框
│   │   ├── PersonalizeDialog.kt  # 个性化对话框
│   │   └── ...                    # 其他组件
│   └── MultiAppScreen.kt        # 主应用界面
└── application/                   # 应用入口
    └── ApplicationKt.kt          # 应用主程序
```

## 🚀 快速开始

### 环境要求
- **JDK**: 17 或更高版本
- **Kotlin**: 1.9 或更高版本
- **Gradle**: 8.14 或更高版本

### 构建和运行

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd MMC2
   ```

2. **构建项目**
   ```bash
   ./gradlew build
   ```

3. **运行应用**
   ```bash
   ./gradlew run
   ```

4. **运行测试**
   ```bash
   ./gradlew test
   ```

### 开发环境设置

1. **导入IDE**
   - 推荐使用 IntelliJ IDEA
   - 打开项目根目录
   - 等待 Gradle 同步完成

2. **配置构建**
   ```bash
   # 清理构建缓存
   ./gradlew clean

   # 生成 IDE 配置文件
   ./gradlew idea
   ```

## 📚 使用指南

### 基础操作

#### 1. 系统成员管理
- **创建新成员**：点击成员设置 → 创建新成员
- **切换成员**：在成员列表中选择当前在前台的成员
- **成员信息**：每个成员可设置名称、个性标签等

#### 2. 对话管理
- **新建对话**：点击对话列表中的 "+" 按钮
- **切换对话**：在左侧对话列表中选择目标对话
- **发送消息**：在右侧输入框中输入消息并发送

#### 3. 个性化设置
- **主题切换**：在设置中选择预设主题
- **颜色定制**：通过颜色个性化对话框调整配色
- **界面调节**：修改字体大小等显示设置

### 高级功能

#### 数据管理
- **导出数据**：通过菜单导出应用数据
- **导入数据**：支持从备份恢复数据
- **清理缓存**：定期清理应用缓存文件

#### 系统配置
- **自动保存**：启用自动保存功能
- **历史限制**：设置单个对话的消息数量限制
- **数据目录**：查看应用数据存储位置

## 🧠 核心概念理解

### 重要术语

| 术语 | 含义 | 应用体现 |
|------|------|----------|
| **系统 (System)** | 多意识体的全体成员集合 | 系统成员管理界面 |
| **意识体 (Consciousness)** | 系统中的独立意识体 | 成员创建和管理 |
| **前台 (Fronting)** | 控制身体的意识体状态 | 当前成员标识显示 |
| **切换 (Switching)** | 意识体控制权变更过程 | 切换动画和状态指示 |
| **后台空间 (Headspace)** | 意识体的虚拟活动空间 | 成员管理界面视觉化 |

## 🔧 开发指南

### 添加新功能

1. **数据模型扩展**
   ```kotlin
   // 在相应数据类中添加新字段
   data class Consciousness(
       // ... 现有字段
       val newField: String, // 新增字段
   )
   ```

2. **UI组件开发**
   ```kotlin
   @Composable
   fun NewComponent(
       param: String,
       onAction: () -> Unit
   ) {
       // 组件实现
   }
   ```

3. **业务逻辑添加**
   ```kotlin
   class NewManager {
       fun performAction() {
           // 业务逻辑实现
       }
   }
   ```

### 代码规范

#### Kotlin 代码风格
- 使用 Kotlin 官方代码风格
- 优先使用不可变数据结构
- 充分利用 Kotlin 协程进行异步操作
- 使用扩展函数简化常用操作

#### Compose 开发规范
- 遵循 Compose 最佳实践
- 合理使用状态管理（remember, mutableStateOf）
- 优先使用无状态组件，状态提升到合适层级
- 使用 Material Design 组件和设计规范

### 测试指南

#### 单元测试
```kotlin
class ConsciousnessTest {
    @Test
    fun testConsciousnessCreation() {
        val consciousness = Consciousness(
            id = "test-id",
            name = "Test Member"
        )
        assertEquals("Test Member", consciousness.name)
    }
}
```

#### 集成测试
```kotlin
class ConversationManagerTest {
    @Test
    fun testMessageSending() {
        // 测试消息发送流程
    }
}
```

## 🐛 已知问题和限制

### 当前限制
1. **平台支持**：目前仅支持桌面平台
2. **数据同步**：暂不支持云端同步
3. **多语言**：仅支持中文界面
4. **无障碍访问**：无障碍功能待完善

### 已知问题
1. **内存使用**：长时间运行可能内存占用较高
2. **大文件处理**：大量历史消息时性能可能下降
3. **主题切换**：某些主题下文字对比度可能不足

## 🔄 更新日志

### v2.0-new (当前版本)
- ✅ 完成 Material Design 迁移
- ✅ 修复主要编译错误
- ✅ 优化主题系统
- ✅ 改进成员管理界面
- ✅ 增强数据导出功能
## 🤝 贡献指南

### 如何贡献
1. **Fork 项目**：从主仓库创建分支
2. **创建 Issue**：描述要解决的问题或新功能
3. **提交 PR**：确保代码符合项目规范
4. **代码审查**：响应审查意见并修改

### 贡献类型
- 🐛 **Bug 修复**：修复已知问题
- ✨ **功能增强**：添加新功能或改进现有功能
- 📚 **文档完善**：改进项目文档
- 🧪 **测试补充**：增加测试覆盖

### 行为准则
- 尊重多意识体社区规范和伦理准则
- 保持代码简洁、可读、可维护
- 提供充分的测试和文档
- 遵循项目既定的架构和设计模式

## 📄 许可证

本项目采用 GPL-2.0 license 许可证。

## 📞 支持

QQ：2738547293
email：new2738547293@gmail.com
### 技术支持
- **Issue 反馈**：通过 GitHub Issues 提交问题
- **功能请求**：在 Issues 中标记为 enhancement
- **文档问题**：提交 documentation 相关 Issue

### 社区资源
- **多意识体社区**：了解多意识体相关概念和规范
- **Compose 开发**：Jetpack Compose 官方文档
- **Kotlin 开发**：Kotlin 官方文档和社区

## 🏷️ 致谢

感谢所有为这个项目做出贡献的开发者和测试者。特别感谢多意识体社区提供的指导和建议，帮助我们创建了一个更加尊重和包容的应用。

---

**MMC2** - 为多意识体系统设计，尊重每一个独特的意识。